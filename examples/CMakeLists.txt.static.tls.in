cmake_minimum_required(VERSION 3.12.0)

project(sockpuppet_demo CXX)

if(${CMAKE_INSTALL_PREFIX_INITIALIZED_TO_DEFAULT})
  # install to the build directory by default
  set(CMAKE_INSTALL_PREFIX "${CMAKE_BINARY_DIR}/install" CACHE PATH "" FORCE)
endif()

set(OPENSSL_ROOT_DIR "@OPENSSL_ROOT_DIR@" CACHE PATH "Path to search for OpenSSL")

# grab all dependency info from the libraries' package files
find_package(OpenSSL REQUIRED)
find_package(sockpuppet REQUIRED
  HINTS "@CMAKE_INSTALL_PREFIX@/lib/cmake/sockpuppet" # search in last known install location
)

add_executable(sockpuppet_http_server sockpuppet_http_server.cpp)

# forward the dependency info to the target
target_link_libraries(sockpuppet_http_server sockpuppet)

# install the executable
install(TARGETS sockpuppet_http_server
  RUNTIME DESTINATION bin
)
